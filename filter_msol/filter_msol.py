#!/usr/bin/python
import sys
users = []


class user:
    def __init__(self, name):
        self.bad = False
        self.name = name 
        users.append(self)

usage = 'pyrhon filter_msol.py output_file user_file'

if len(sys.argv) != 3:
    print(usage)
else:
    with open(sys.argv[2], 'r') as f:
        for line in f:
            line = line.split('\n')
            new_user = user(line[0])
    with open(sys.argv[1], 'r') as f:
        for line in f:
            if "doesn't exist." in line:
                buser = line.split(" ")[3]
                for user in users:
                    if user.name == buser:
                        user.bad = True
    with open('./validated_emails.txt', 'w') as f: 
        for user in users:
            if user.bad == False:
                print(user.name)
                with open('./validated_emails.txt', 'a') as f:
                    f.write("{}\n".format(user.name))
