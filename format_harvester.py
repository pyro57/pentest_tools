#!/usr/bin/python3
import os
import sys


def main():
    print('''
Welcom to the harvester formatting tool.
This tool is designed around the linked in results from the harvester
it will take a txt file with those results in and output an email file and a username file
    ''')
    users = {}
    company_domain = sys.argv[1]
    harvester_out = sys.argv[2]
    print('''
email format?
1.) jdoe@company.com
2.) johnd@company.com
3.) john.doe@company.com
4.) unkown
    ''')
    email_format = input("$>")
    print('''
username format?
1.) jdoe
2.) johnd
3.) john.doe
4.) unkown
    ''')
    username_format = input("$>")
    with open(harvester_out, 'r') as input_file:
        for line in input_file:
            line = line.split(' ');
            first = line[0]
            last = line[1]
            users[first] = last 
    for user in users.keys():
        first = user
        last = users[user]
        with open("./formatted_emails.txt", 'a') as f:
            if email_format == '1':
                f.write("{}{}@{}\n".format(first[0], last, company_domain))
            elif email_format == '2':
                f.write("{}{}@{}\n".format(first, last[0], company_domain))
            elif email_format == '3':
                f.write("{}.{}@{}\n".format(first, last, company_domain))
            elif email_format == '4':
                f.write("{}.{}@{}\n".format(first, last, company_domain))
                f.write("{}{}@{}\n".format(first[0], last, company_domain))
                f.write("{}{}@{}\n".format(first, last[0], company_domain))
            else:
                print("unknown email format selection")
                break
        with open("./formatted_usernames.txt", 'a') as f:
            if username_format == '1':
                f.write("{}{}\n".format(first[0], last))
            elif username_format == '2':
                f.write("{}{}\n".format(first, last[0]))
            elif username_format == '3':
                f.write("{}{}\n".format(first, last))
            elif username_format == '4':
                f.write("{}{}\n".format(first, last))
                f.write("{}{}\n".format(first[0], last))
                f.write("{}{}\n".format(first, last[0]))
            else:
                print("Unknown username format")
                break


if __name__ == "__main__":
    main()